<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
      integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css"
      integrity="sha512-dPXYcDub/aeb08c63jRq/k6GaKccl256JQy/AnOq7CAnEZ9FzSL9wSbcZkMp4R26vBsMLFYH4kQ67/bbV8XaCQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <script
      src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
      crossorigin="anonymous"
    ></script>

    <link rel="stylesheet" href="./style.css" />
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico" />

    <title>PM2 GUI</title>
  </head>

  <body>
    <div class="container mt-2">
      <div class="card panel-success">
        <div class="card-body">
          <div class="card-title d-flex flex-row justify-content-between">
            <h5>Servers</h5>
            <div class="d-flex">
              <button
                type="button"
                class="btn btn-outline-secondary"
                title="Setting"
                data-toggle="modal"
                data-target="#envModal"
              >
                <i class="bi bi-gear"></i>
              </button>
            </div>
          </div>
          <table id="tbl-processes" class="table">
            <thead>
              <tr>
                <th scope="col">Id</th>
                <th scope="col">Name</th>
                <th scope="col">Status</th>
                <th scope="col">Monitor</th>
                <th scope="col">Action</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

      <!-- Editor for Environment Modal -->
      <div
        class="modal fade"
        id="envModal"
        tabindex="-1"
        aria-labelledby="Environment Modal"
        aria-hidden="true"
      >
        <div class="modal-dialog editor-modal">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="envModalLabel">Settings</h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <!-- Editor content -->
              <div id="editor"></div>
            </div>
            <div class="modal-footer d-flex justify-content-between">
              <div>
                <a
                  href="https://pm2.keymetrics.io/docs/usage/application-declaration/"
                  target="_blank"
                  >PM2 config Documentation</a
                >
              </div>

              <div>
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-dismiss="modal"
                >
                  Close
                </button>
                <button
                  type="button"
                  class="btn btn-primary"
                  data-btn-type="save_setting"
                >
                  Apply Config
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Editor for Process Config Modal -->
      <div
        class="modal fade"
        id="processConfigModal"
        tabindex="-1"
        aria-labelledby="Process Config Modal"
        aria-hidden="true"
      >
        <div class="modal-dialog process-editor-modal">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="processConfigModalLabel">
                Process Settings
              </h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <!-- Editor content -->
              <div id="process-config-editor"></div>
            </div>
            <div class="modal-footer d-flex justify-content-between">
              <div>
                <a
                  href="https://pm2.keymetrics.io/docs/usage/application-declaration/"
                  target="_blank"
                  >PM2 config Documentation</a
                >
              </div>

              <div>
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-dismiss="modal"
                >
                  Close
                </button>
                <button
                  type="button"
                  class="btn btn-primary"
                  data-btn-type="save_process_setting"
                >
                  Apply Config
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.33.1/ace.js"
      integrity="sha512-WN1CEDE9Js0mEqvtRrNS7GHS+arRJxWVO03zttkQQXEQjwGVcHQ2kMja415m0bNeB3AtYsyjUWJ1BS4wGLta/Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <script src="js/constants.js"></script>
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/render-dom.js"></script>
    <script src="js/api.js"></script>
    <script src="js/editor.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
